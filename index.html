<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>Turf.js | Geospatial Analysis Library</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link rel="stylesheet" href="./assets/css/pure-min.css" />
  <link rel="stylesheet" href="./assets/css/custom.css" />
  <link rel="stylesheet" href="./assets/css/github.css" />
  <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.6/mapbox.css' rel='stylesheet' />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <style>
    #map1, #map2{
      height: 200px;
      width: 100%;
    }
    #moduleHolder{
      width: 100%;
      height: 200px;
    }
    #moduleHolder div {
      background-color: #f7f7f7;
      line-height: 2rem;
      position: relative;
      top: 45%;
    }
    .credits{
      text-align: center;
      margin-top: 50px;
    }
    #home .centredContainer{
      margin-bottom: 0px;
    }
  </style>
</head>
<body id="home">
  <div class="pure-menu pure-menu-horizontal pure-u-1-1">
    <div class="logoHolder">
      <a href="index.html" class="pure-menu-heading pure-menu-link">TURF</a>
    </div>
    <ul class="pure-menu-list">
      <li class="pure-menu-item"><a href="getting-started.html" class="pure-menu-link">GETTING STARTED</a></li>
      <li class="pure-menu-item"><a href="docs.html" class="pure-menu-link">API</a></li>
      <li class="pure-menu-item"><a href="examples.html" class="pure-menu-link">EXAMPLES</a></li>
      <li class="pure-menu-item" id="github">
        <a href="https://github.com/Turfjs/turf" class="pure-menu-link"><img src="./assets/images/github.svg" alt="Kiwi standing on oval" class="githubLogo">GITHUB</a>
      </li>
    </ul>
  </div>
  <div class="pure-g">
    <div class="pure-u-1-1 centredContainer">
      <h2 style="text-align: center;">Advanced geospatial analysis for browsers
        and node</h2>
        <div class="pure-g">
          <div class="pure-u-1-3">
            <div id="map1"></div>
            <h4>Simple</h4>
            <p>Modular, simple-to-understand JavaScript functions that speak GeoJSON</p>
          </div>
          <div class="pure-u-1-3">
            <div id="moduleHolder">
              <div style="text-align: center;">> turf.tin(points);</div>
            </div>
            <h4>Fast</h4>
            <p>Takes advantage of the newest algorithms and doesn't require you to send data to a server</p>
          </div>
          <div class="pure-u-1-3">
            <div id="map2"></div>
            <h4>Modular</h4>
            <p>Turf is a collection of small modules. You can require just what you use with browserify</p>
          </div>
          <div class="pure-u-1-1">
            <h3>Installation</h3>
            <table class="installTable">
              <tbody>
                <tr>
                  <td style="width: 30%"><strong>npm</strong></td><td style="width: 70%">npm install @turf/turf</td>
                </tr>
                <tr>
                  <td><strong>cdn</strong></td><td>https://npmcdn.com/@turf/turf/turf.min.js</td>
                </tr>
                <tr>
                  <td><strong>download</strong></td><td><a href="https://npmcdn.com/@turf/turf/turf.min.js" style="color: #2ecc71; text-decoration: none;">turf.min.js</a></td>
                </tr>
              </tbody>
            </table>
            <div class="credits">
              <p>Library released under <a href="https://github.com/Turfjs/turf/blob/master/LICENSE">MIT license</a>. Â© 2017 <a href="https://twitter.com/morganherlocker">Morgan Herlocker.</a></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.6/mapbox.js'></script>
  <script src="https://npmcdn.com/@turf/turf/turf.min.js"></script>
  <script>
    L.mapbox.accessToken = 'pk.eyJ1IjoidG1jdyIsImEiOiJIZmRUQjRBIn0.lRARalfaGHnPdRcc-7QZYQ';
    var mapOptions = { attributionControl: false, zoomControl: false };
    var map1 = L.mapbox.map('map1', 'tmcw.kncfa9dj', mapOptions);
    var map2 = L.mapbox.map('map2', 'tmcw.kncfa9dj', mapOptions);

    function pointToLayer(feature, latlng) {
      return L.circleMarker(latlng);
    };
    var points = {
      "type": "FeatureCollection",
      "features": [
      {
        "type": "Feature",
        "properties": {
          "price": 10
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
          -74.00081634521484,
          40.73919337320588
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "price": 12
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
          -73.99227619171143,
          40.74234739360884
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "price": 16
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
          -73.9972972869873,
          40.732201970137126
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "price": 5
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
          -73.99476528167725,
          40.73799025385534
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "price": 15
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
          -73.98914337158203,
          40.74153451605774
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "price": 5
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
          -73.99330615997314,
          40.734803508271256
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "price": 2
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
          -73.98837089538574,
          40.73906330729812
          ]
        }
      }
      ]
    };


    function valueSum(obj) {
      var sum = 0;
      for (var k in obj) sum += obj[k];
        return sum;
    }
    var geojsonOptions = {
      pointToLayer: pointToLayer,
      style: function(feature) {
        if (feature.geometry.type === 'Polygon') {
          var sum = valueSum(feature.properties) / 62;
          return {
            weight: 1,
            fillOpacity: sum,
            color: '#222'
          }
        } else {
          return {
            radius: 3,
            stroke: false,
            color: '#000',
            fillOpacity: 1
          };
        }
      }
    };

    var pointsLayer1 = L.geoJson(points, geojsonOptions).addTo(map1);
    map1.fitBounds(pointsLayer1.getBounds());

    var tin = turf.tin(points, 'price');
    map2.addLayer(L.geoJson(tin, geojsonOptions));
    var pointsLayer2 = L.geoJson(points, geojsonOptions).addTo(map2);
    map2.fitBounds(pointsLayer2.getBounds());

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-12158002-13', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
