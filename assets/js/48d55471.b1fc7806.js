(self.webpackChunkturf_www=self.webpackChunkturf_www||[]).push([[15521],{27769:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Map0:()=>d,assets:()=>p,contentTitle:()=>c,default:()=>x,frontMatter:()=>h,metadata:()=>u,toc:()=>f});var n=r(74848),i=r(28453),o=r(67149),a=r(9200),s=r(36145),l=r(78478);const h={title:"collect"},c=void 0,u={id:"api/collect",title:"collect",description:"Description",source:"@site/docs/api/collect.mdx",sourceDirName:"api",slug:"/api/collect",permalink:"/docs/next/api/collect",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api/collect.mdx",tags:[],version:"current",frontMatter:{title:"collect"},sidebar:"apiSidebar",previous:{title:"clustersKmeans",permalink:"/docs/next/api/clustersKmeans"},next:{title:"clusterEach",permalink:"/docs/next/api/clusterEach"}},p={},f=[{value:"Description",id:"description",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Returns",id:"returns",level:3},{value:"Examples",id:"examples",level:3},{value:"Installation",id:"installation",level:3}];function d(){var t=o.n1([[[0,0],[10,0],[10,10],[0,10],[0,0]]]),e=o.n1([[[10,0],[20,10],[20,20],[20,0],[10,0]]]),r=o.Lr([t,e]),i=o.zx([5,5],{population:200}),l=o.zx([1,3],{population:600}),h=o.zx([14,2],{population:100}),c=o.zx([13,1],{population:200}),u=o.zx([19,7],{population:300}),p=o.Lr([i,l,h,c,u]),f=a.F(r,p,"population","values"),d=(f.features[0].properties.values,{pointFC:p,collected:f});return(0,n.jsx)(s.A,{addToMap:d})}function m(t){const e={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h3,{id:"description",children:"Description"}),"\n",(0,n.jsxs)(e.p,{children:["Merges a specified property from a FeatureCollection of points into a\nFeatureCollection of polygons. Given an ",(0,n.jsx)(e.code,{children:"inProperty"})," on points and an ",(0,n.jsx)(e.code,{children:"outProperty"}),"\nfor polygons, this finds every point that lies within each polygon, collects the\n",(0,n.jsx)(e.code,{children:"inProperty"})," values from those points, and adds them as an array to ",(0,n.jsx)(e.code,{children:"outProperty"}),"\non the polygon."]}),"\n",(0,n.jsx)(e.h3,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Name"}),(0,n.jsx)(e.th,{children:"Type"}),(0,n.jsx)(e.th,{children:"Description"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"polygons"}),(0,n.jsx)(e.td,{children:(0,n.jsxs)(e.strong,{children:[(0,n.jsx)(e.a,{href:"https://tools.ietf.org/html/rfc7946#section-3.3",children:"FeatureCollection"}),"<",(0,n.jsx)(e.a,{href:"https://tools.ietf.org/html/rfc7946#section-3.1.6",children:"Polygon"}),">"]})}),(0,n.jsx)(e.td,{children:"polygons with values on which to aggregate"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"points"}),(0,n.jsx)(e.td,{children:(0,n.jsxs)(e.strong,{children:[(0,n.jsx)(e.a,{href:"https://tools.ietf.org/html/rfc7946#section-3.3",children:"FeatureCollection"}),"<",(0,n.jsx)(e.a,{href:"https://tools.ietf.org/html/rfc7946#section-3.1.2",children:"Point"}),">"]})}),(0,n.jsx)(e.td,{children:"points to be aggregated"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"inProperty"}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"string"})}),(0,n.jsx)(e.td,{children:"property to be nested from"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"outProperty"}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"string"})}),(0,n.jsx)(e.td,{children:"property to be nested into"})]})]})]}),"\n",(0,n.jsx)(e.h3,{id:"returns",children:"Returns"}),"\n",(0,n.jsx)("ul",{children:(0,n.jsxs)(e.p,{children:[(0,n.jsxs)(e.strong,{children:[(0,n.jsx)(e.a,{href:"https://tools.ietf.org/html/rfc7946#section-3.3",children:"FeatureCollection"}),"<",(0,n.jsx)(e.a,{href:"https://tools.ietf.org/html/rfc7946#section-3.1.6",children:"Polygon"}),">"]})," polygons with properties listed based on ",(0,n.jsx)(e.code,{children:"outField"})]})}),"\n",(0,n.jsx)(e.h3,{id:"examples",children:"Examples"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-javascript",children:'var poly1 = turf.polygon([\n  [\n    [0, 0],\n    [10, 0],\n    [10, 10],\n    [0, 10],\n    [0, 0],\n  ],\n]);\nvar poly2 = turf.polygon([\n  [\n    [10, 0],\n    [20, 10],\n    [20, 20],\n    [20, 0],\n    [10, 0],\n  ],\n]);\nvar polyFC = turf.featureCollection([poly1, poly2]);\nvar pt1 = turf.point([5, 5], { population: 200 });\nvar pt2 = turf.point([1, 3], { population: 600 });\nvar pt3 = turf.point([14, 2], { population: 100 });\nvar pt4 = turf.point([13, 1], { population: 200 });\nvar pt5 = turf.point([19, 7], { population: 300 });\nvar pointFC = turf.featureCollection([pt1, pt2, pt3, pt4, pt5]);\nvar collected = turf.collect(polyFC, pointFC, "population", "values");\nvar values = collected.features[0].properties.values;\n//=values => [200, 600]\n'})}),"\n","\n",(0,n.jsx)(l.A,{children:()=>(0,n.jsx)(d,{})}),"\n",(0,n.jsx)(e.h3,{id:"installation",children:"Installation"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-javascript",children:'$ npm install @turf/collect\n\nimport { collect } from "@turf/collect";\nconst result = collect(...);\n'})}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-javascript",children:'$ npm install @turf/turf\n\nimport * as turf from "@turf/turf";\nconst result = turf.collect(...);\n'})})]})}function x(t={}){const{wrapper:e}={...(0,i.R)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(m,{...t})}):m(t)}},262:function(t){t.exports=function(){"use strict";function t(t,n,i,o,a){!function t(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=n-i+1,h=Math.log(s),c=.5*Math.exp(2*h/3),u=.5*Math.sqrt(h*c*(s-c)/s)*(l-s/2<0?-1:1);t(r,n,Math.max(i,Math.floor(n-l*c/s+u)),Math.min(o,Math.floor(n+(s-l)*c/s+u)),a)}var p=r[n],f=i,d=o;for(e(r,i,n),a(r[o],p)>0&&e(r,i,o);f<d;){for(e(r,f,d),f++,d--;a(r[f],p)<0;)f++;for(;a(r[d],p)>0;)d--}0===a(r[i],p)?e(r,i,d):e(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(t,n,i||0,o||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var a=t.children[o];s(i,t.leaf?n(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!f(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;f(t,s)&&(e.leaf?r.push(a):p(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,a=this.data,s=this.toBBox(t),l=[],h=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],r=h.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!p(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(l.push(a),h.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,a=r-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=d([])).leaf=!1,i.height=n;var l=Math.ceil(a/s),h=l*Math.ceil(Math.sqrt(s));m(t,e,r,h,this.compareMinX);for(var c=e;c<=r;c+=h){var u=Math.min(c+h-1,r);m(t,c,u,l,this.compareMinY);for(var p=c;p<=u;p+=l){var f=Math.min(p+l-1,u);i.children.push(this._build(t,p,f,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],h=c(l),u=(p=t,f=l,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-h);u<o?(o=u,i=h<i?h:i,a=l):u===o&&h<i&&(i=h,a=l)}e=a||e.children[0]}var p,f;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),s(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=d(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,s,l,h,u,p=1/0,f=1/0,d=e;d<=r-e;d++){var m=a(t,0,d,this.toBBox),x=a(t,d,r,this.toBBox),g=(i=m,o=x,s=void 0,l=void 0,h=void 0,u=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),h=Math.min(i.maxX,o.maxX),u=Math.min(i.maxY,o.maxY),Math.max(0,h-s)*Math.max(0,u-l)),y=c(m)+c(x);g<p?(p=g,n=d,f=y<f?y:f):g===p&&y<f&&(f=y,n=d)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,r-e,r,i),h=u(o)+u(l),c=e;c<r-e;c++){var p=t.children[c];s(o,t.leaf?i(p):p),h+=u(o)}for(var f=r-e-1;f>=e;f--){var d=t.children[f];s(l,t.leaf?i(d):d),h+=u(l)}return h},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},42634:()=>{},99589:(t,e,r)=>{"use strict";r.d(e,{Q:()=>i});var n=r(63399);function i(t,e={}){if(null!=t.bbox&&!0!==e.recompute)return t.bbox;const r=[1/0,1/0,-1/0,-1/0];return(0,n.Fh)(t,(t=>{r[0]>t[0]&&(r[0]=t[0]),r[1]>t[1]&&(r[1]=t[1]),r[2]<t[0]&&(r[2]=t[0]),r[3]<t[1]&&(r[3]=t[1])})),r}(0,Object.defineProperty)(i,"name",{value:"bbox",configurable:!0})},10200:(t,e,r)=>{"use strict";r.d(e,{m:()=>s});const n=function(t,e){for(var r=0,n=0,i=0,o=0,a=0,s=0,l=0,h=0,c=null,u=null,p=t[0],f=t[1],d=e.length;r<d;r++){n=0;var m=e[r].length-1,x=e[r];if((c=x[0])[0]!==x[m][0]&&c[1]!==x[m][1])throw new Error("First and last coordinates in a ring must be the same");for(a=c[0]-p,s=c[1]-f;n<m;n++)if(h=(u=x[n+1])[1]-f,s<0&&h<0||s>0&&h>0)s=h,a=(c=u)[0]-p;else{if(l=u[0]-t[0],h>0&&s<=0){if((o=a*h-l*s)>0)i+=1;else if(0===o)return 0}else if(s>0&&h<=0){if((o=a*h-l*s)<0)i+=1;else if(0===o)return 0}else if(0===h&&s<0){if(0===(o=a*h-l*s))return 0}else if(0===s&&h<0){if(0===(o=a*h-l*s))return 0}else if(0===s&&0===h){if(l<=0&&a>=0)return 0;if(a<=0&&l>=0)return 0}c=u,s=h,a=l}}return i%2!=0};var i=r(83490),o=Object.defineProperty,a=(t,e)=>o(t,"name",{value:e,configurable:!0});function s(t,e,r={}){if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");const o=(0,i.uG)(t),a=(0,i.bg)(e),s=a.type,h=e.bbox;let c=a.coordinates;if(h&&!1===l(o,h))return!1;"Polygon"===s&&(c=[c]);let u=!1;for(var p=0;p<c.length;++p){const t=n(o,c[p]);if(0===t)return!r.ignoreBoundary;t&&(u=!0)}return u}function l(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}a(s,"booleanPointInPolygon"),a(l,"inBBox")},9200:(t,e,r)=>{"use strict";r.d(e,{F:()=>l});var n=r(99589),i=r(10200),o=r(262),a=Object.defineProperty,s=o;function l(t,e,r,o){var a=new s(6),l=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null==(e=t.properties)?void 0:e[r]}}));return a.load(l),t.features.forEach((function(t){t.properties||(t.properties={});var e=(0,n.Q)(t),r=a.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),s=[];r.forEach((function(e){(0,i.m)([e.minX,e.minY],t)&&s.push(e.property)})),t.properties[o]=s})),t}a(l,"name",{value:"collect",configurable:!0})},83490:(t,e,r)=>{"use strict";r.d(e,{$R:()=>s,Pw:()=>u,bg:()=>c,iw:()=>h,mo:()=>l,uG:()=>a});var n=r(67149),i=Object.defineProperty,o=(t,e)=>i(t,"name",{value:e,configurable:!0});function a(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return[...t.geometry.coordinates];if("Point"===t.type)return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function s(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function l(t,e,r){if(!t)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.geometry.type)}function h(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(const n of t.features){if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+n.geometry.type)}}function c(t){return"Feature"===t.type?t.geometry:t}function u(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}o(a,"getCoord"),o(s,"getCoords"),o((function t(e){if(e.length>1&&(0,n.Et)(e[0])&&(0,n.Et)(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")}),"containsNumber"),o((function(t,e,r){if(!e||!r)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.type)}),"geojsonType"),o(l,"featureOf"),o(h,"collectionOf"),o(c,"getGeom"),o(u,"getType")}}]);