---
template: prose.html
title: Turf.js
permalink: false
---

<p class='big'>Advanced geospatial analysis for browsers
and node</p>

<div class='col12 clearfix space-bottom4 space-top4 hide-mobile'>
  <div class='col4 keyline-all'>
    <div id='map1' class='row3'>
    </div>
  </div>
  <div class='col3'>
    <div class='scroll-styled row3  pad4y'>
      <pre class='icon next unround'>turf.tin(points);</pre>
    </div>
  </div>
  <div class='col5 keyline-all'>
    <div id='map2' class='row3'>
    </div>
  </div>
</div>

<div class='col12 clearfix pad2'>
  <div class='col4 pad1r'>
    <h2>Simple</h2>
    <p>Modular, simple-to-understand JavaScript
    functions that speak GeoJSON</p>
  </div>
  <div class='col4 pad1r'>
    <h2>Fast</h2>
    <p>Takes advantage of the newest algorithms
    and doesn't require you to send data to a server</p>
  </div>
  <div class='col4 pad1r'>
    <h2>Modular</h2>
    <p>Turf is a collection of small modules.
    You can require just what you use
    with browserify</p>
  </div>
</div>

<div class='col12 space-top4 clearfix round'>
  <div class='col2'>
    <h2>Install</h2>
  </div>
  <div class='col10 keyline-all round'>
    <div class='keyline-bottom clearfix'>
      <div class='pad1y pad1x col2'>
        <h3>node</h3>
      </div>
      <div class='col10'>
        <pre>npm install turf</pre>
      </div>
    </div>
    <div class='clearfix'>
      <div class='pad1y pad1x col2'>
        <h3>CDN</h3>
      </div>
      <div class='col10 scroll-styled'>
        <pre>https://api.tiles.mapbox.com/mapbox.js/plugins/turf/v2.0.0/turf.min.js</pre>
      </div>
    </div>
  </div>
</div>

<script>
var points = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "price": 10
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -74.00081634521484,
          40.73919337320588
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "price": 12
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -73.99227619171143,
          40.74234739360884
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "price": 16
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -73.9972972869873,
          40.732201970137126
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "price": 5
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -73.99476528167725,
          40.73799025385534
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "price": 15
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -73.98914337158203,
          40.74153451605774
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "price": 5
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -73.99330615997314,
          40.734803508271256
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "price": 2
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -73.98837089538574,
          40.73906330729812
        ]
      }
    }
  ]
};
L.mapbox.accessToken = 'pk.eyJ1IjoidG1jdyIsImEiOiJIZmRUQjRBIn0.lRARalfaGHnPdRcc-7QZYQ';
function pointToLayer(feature, latlng) {
    return L.circleMarker(latlng);
};

function valueSum(obj) {
    var sum = 0;
    for (var k in obj) sum += obj[k];
    return sum;
}

var geojsonOptions = {
    pointToLayer: pointToLayer,
    style: function(feature) {
      if (feature.geometry.type === 'Polygon') {
        var sum = valueSum(feature.properties) / 62;
        return {
          weight: 1,
          fillOpacity: sum,
          color: '#222'
        }
      } else {
        return {
          radius: 3,
          stroke: false,
          color: '#000',
          fillOpacity: 1
        };
      }
    }
};

var mapOptions = { attributionControl: false, zoomControl: false };
var map1 = L.mapbox.map('map1', 'tmcw.kncfa9dj', mapOptions);
map1.scrollWheelZoom.disable();
var pointsLayer1 = L.geoJson(points, geojsonOptions).addTo(map1);
map1.fitBounds(pointsLayer1.getBounds());

var map2 = L.mapbox.map('map2', 'tmcw.kncfa9dj', mapOptions);
map2.scrollWheelZoom.disable();
var tin = turf.tin(points, 'price');
map2.addLayer(L.geoJson(tin, geojsonOptions));
var pointsLayer2 = L.geoJson(points, geojsonOptions).addTo(map2);
map2.fitBounds(pointsLayer2.getBounds());

</script>
